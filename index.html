<!doctype html>
<html lang="pt-br">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Shiva Conexões — Relatório de Ensaio PVC-U</title>
  <meta name="color-scheme" content="light only" />
  <meta name="theme-color" content="#0E3554" />

  <!-- CSS principal -->
  <link rel="stylesheet" href="style.css" />

  <!-- jsPDF (para gerar PDF “texto”) -->
  <script defer src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <!-- Script principal -->
  <script src="script.js" defer></script>
</head>

<body>
  <a class="sr-only sr-only-focusable" href="#conteudo">Pular para o conteúdo</a>

  <header class="topbar" role="banner">
    <div class="container topbar__inner">
      <div class="brand" aria-label="Shiva Conexões">
        <img src="Shiva.png" alt="Shiva Conexões" />
        <div class="brand-text">
          <span class="brand-title">Relatórios de Ensaio</span>
          <span class="brand-sub">PVC-U • Conexões</span>
        </div>
      </div>

      <div class="topbar__right">
        <nav class="actions" role="group" aria-label="Ações do relatório">
          <div class="btn-group">
            <button id="btnToggleAside" class="btn btn--ghost" type="button" title="Mostrar/ocultar lista"
              aria-controls="listaRelatorios" aria-expanded="true">☰ Lista</button>
          </div>

          <div class="btn-group">
            <button id="btnSalvar" class="btn btn--primary" type="button" title="Salvar no navegador">
              Salvar
            </button>
          </div>

          <div class="btn-group">
            <button id="btnPDF" class="btn btn--secondary" type="button" title="Gerar PDF (texto)">
              PDF
            </button>
            <button id="btnImprimir" class="btn btn--secondary" type="button" title="Imprimir página">
              Imprimir
            </button>
          </div>
        </nav>
      </div>
    </div>
  </header>

  <main class="layout" id="app" role="main">
    <div class="container">
      <div id="ariaLive" class="sr-only" aria-live="polite" aria-atomic="true"></div>

      <aside class="lista-relatorios" aria-label="Relatórios salvos">
        <div class="aside-head">
          <h2>Relatórios</h2>
          <div class="search-group">
            <label for="filtroLista" class="sr-only">Buscar em relatórios salvos</label>
            <input id="filtroLista" placeholder="Buscar..." type="search" autocomplete="off" />
            <button type="button" id="btnBuscarRelatorio" class="btn btn--secondary" title="Buscar relatório">
              Buscar
            </button>
          </div>
          <div class="aside-buttons"></div>
        </div>
        <ul id="listaRelatorios" aria-live="polite"></ul>
      </aside>

      <section class="conteudo" id="conteudo" tabindex="-1">
        <form id="formRelatorio" novalidate>
          <fieldset>
            <legend>Identificação do Relatório</legend>
            <div class="grid">
              <label for="numeroRelatorio">Nº do Relatório</label>
              <input required id="numeroRelatorio" name="numeroRelatorio" autocomplete="off" inputmode="numeric" />

              <label for="ordemProducao">Nº Ordem de Produção</label>
              <input id="ordemProducao" name="ordemProducao" autocomplete="off" inputmode="numeric" />

              <label for="fornecedorFabricante">Fornecedor/Fabricante</label>
              <input id="fornecedorFabricante" name="fornecedorFabricante"
                value="MARINI INDUSTRIA E COMERCIO DE PLÁSTICO" readonly />

              <label for="interessado">Interessado</label>
              <input id="interessado" name="interessado" autocomplete="name" />


              <label for="revisao">Revisão</label>
              <input id="revisao" name="revisao" autocomplete="off" />

              <label for="dataEmissao">Data de emissão</label>
              <input required id="dataEmissao" name="dataEmissao" type="date" />

              <label for="responsavelTecnico">Responsável Técnico</label>
              <input required id="responsavelTecnico" name="responsavelTecnico" autocomplete="name" />

              <label for="laboratorio">Laboratório</label>
              <input required id="laboratorio" name="laboratorio" autocomplete="organization" />

              <label for="normasReferencia" class="full">Normas de Referência</label>
              <select id="normasReferencia" name="normasReferencia">
                <option value="">Selecione...</option>
                <option value="ABNT NBR 5648:2018">ABNT NBR 5648:2018</option>
                <option value="ABNT NBR 8219">ABNT NBR 8219</option>
                <option value="ABNT NBR NM 82">ABNT NBR NM 82</option>
                <option value="EN 62321-3-1:2014">EN 62321-3-1:2014</option>
                <option value="ABNT NBR NM 84">ABNT NBR NM 84</option>
                <option value="ABNT NBR 8218">ABNT NBR 8218</option>
                <option value="ABNT NBR 14264">ABNT NBR 14264</option>
                <option value="ABNT NBR 7371">ABNT NBR 7371</option>
              </select>
            </div>
          </fieldset>

          <fieldset>
            <legend>Identificação da(s) Amostra(s)</legend>
            <div id="amostras"></div>
            <button type="button" class="btn btn--secondary" id="btnAddAmostra">+ Adicionar amostra</button>
          </fieldset>

          <fieldset class="no-print">
            <legend>Métodos e Materiais Empregados</legend>
            <p class="hint">
              Cadastro interno (não sai no relatório). Preencha e clique em <strong>Incluir</strong>.
              Use <strong>Alterar</strong> ou <strong>Excluir</strong> nas linhas.
            </p>

            <div class="grid">
              <label for="ensaioRealizado">Ensaio Realizado</label>
              <select id="ensaioRealizado">
                <option value="">Selecione...</option>
                <option value="phi">Pressão Hidrostática (PHI)</option>
                <option value="junta">Pressão Hidrostática (Junta Elástica)</option>
                <option value="vácuo">Vácuo</option>
                <option value="dimensional">Dimensional</option>
                <option value="marcações">Marcações</option>
                <option value="achatamento">Achatamento</option>
                <option value="calor">Comportamento ao calor</option>
              </select>

              <label for="amostrasSelect">Amostras</label>
              <select id="amostrasSelect">
                <option value="">Selecione...</option>
                <option value="08">08</option>
                <option value="32">32</option>
              </select>

              <label for="metodo">Método</label>
              <select id="metodo">
                <option value="">Selecione...</option>
                <option value="0,5">0,5 Kgf/cm² × 15 min</option>
                <option value="2">2 Kgf/cm² × 15 min</option>
                <option value="-0,3">-0,3 Bar × 15 min</option>
                <option value="gabarito">Gabarito</option>
                <option value="visual">Visual</option>
                <option value="deflexao">Deflexão de (X) 30%</option>
                <option value="150">150º ± 2º × 30 min</option>
              </select>

              <label for="resultado">Resultado</label>
              <select id="resultado">
                <option value="">Selecione...</option>
                <option value="aprovado">Aprovado</option>
                <option value="reprovado">Reprovado</option>
              </select>
            </div>

            <div class="inline">
              <button type="button" id="btnAddMetodo" class="btn btn--secondary">Incluir</button>
              <button type="button" id="btnLimparMetodo" class="btn btn--secondary">Limpar</button>
            </div>
          </fieldset>

          <fieldset>
            <legend>Resultados dos Ensaios</legend>
            <div class="tabela-wrap">
              <table class="tabela" id="tblResultados">
                <caption class="sr-only">Tabela de resultados dos ensaios</caption>
                <thead>
                  <tr>
                    <th scope="col">Ensaio</th>
                    <th scope="col">Resultado obtido</th>
                    <th scope="col">Requisito normativo</th>
                    <th scope="col">Conformidade</th>
                    <th scope="col" aria-label="Ações"></th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>

            <button type="button" class="btn btn--secondary" id="btnAddResultado">+ Adicionar resultado</button>

            <div id="imagens"></div>
            <button type="button" class="btn btn--secondary" id="btnAddImagem">+ Adicionar imagem</button>
            <p class="hint">Cole uma URL de imagem ou selecione um arquivo. Inclua legenda e texto alternativo.</p>

            <div class="container" id="anexos">
              <h6>Adicionar Anexo</h6>
              <p>Preencha as informações abaixo, os campos em negrito são obrigatórios.</p>

              <div class="form-group">
                <label for="descricao"><b>Descrição</b></label>
                <input type="text" id="descricao" placeholder="Descrição" autocomplete="off" />
              </div>

              <div class="form-group">
                <label for="arquivo"><b>Arquivo</b></label>
                <input type="file" id="arquivo" />
              </div>

              <button type="button" id="btnNovoAnexo" class="btn btn--secondary">+ Novo</button>
            </div>
          </fieldset>

          <input type="hidden" name="id" />
        </form>
      </section>
    </div>
  </main>

  <footer class="rodape" role="contentinfo">
    <div class="container">
      <small>© <span id="ano"></span> Shiva Conexões — Relatórios digitais.</small>
    </div>
  </footer>
</body>

</html>